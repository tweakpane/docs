<!DOCTYPE html>
<html lang="en" class="v4">
<head>
	<meta charset="UTF-8">
	
	<title>Version 3.x To 4.x | Tweakpane</title>
	
	<meta name="viewport" content="initial-scale=1,minimum-scale=1,maximum-scale=1">
	<meta name="og:description" content="A compact pane for fine-tuning parameters and monitoring value changes">
	<meta property="og:image" content="https://cocopon.github.io/tweakpane/assets/og.png">
	<meta name="og:title" content="Tweakpane">
	<meta property="og:type" content="website">
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:description" content="A compact pane for fine-tuning parameters and monitoring value changes">
	<meta name="twitter:image" content="https://cocopon.github.io/tweakpane/assets/og.png">
	<meta name="twitter:title" content="Tweakpane">
	<link rel="stylesheet" href="../../assets/bundle.css">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
	<div class="main main-v4">
		<div class="main_globalHeader">
			<div class="globalHeader">
	<div class="globalHeader_inner">
		<div class="globalHeader_logo">
			<div class="logo">
				<a class="logo_main" href="../../">
					<div class="logo_symbol"></div>
					<div class="logo_text">Tweakpane</div>
				</a>
			</div>
		</div>
		<div class="globalHeader_spMenuButton">
			<button id="spMenuButton" class="spMenuButton">
				<span class="material-icons">menu</span>
			</button>
		</div>
	</div>
</div>

		</div>
		<div class="main_wrap">
			<div class="main_menu">
				<div class="menu">
	<div class="menu_logo">
		<div class="logo">
			<a class="logo_main" href="../../">
				<div class="logo_symbol"></div>
				<div class="logo_text">Tweakpane</div>
			</a>
			<div class="logo_version">
				<div class="logoSwitcher">
					<select class="logoSwitcher_select">
						<option value="">4.0.0</option>
						<option value="../../../v3/">3.x</option>
					</select>
					<div class="logoSwitcher_arrow"></div>
				</div>
			</div>
		</div>
	</div>
	<ul class="menu_list">
		<li class="menuItem">
			<a class="menuItem_anchor" href="../../getting-started/">Getting started</a>
		</li>
		<li class="menuItem">
			<a class="menuItem_anchor" href="../../quick-tour/">Quick tour</a>
		</li>
		<li class="menuItem">
			<a class="menuItem_anchor" href="../../input-bindings/">Bindings</a>
		</li>
		<li class="menuItem">
			<ul class="submenu">
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../input-bindings/#number">Number</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../input-bindings/#string">String</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../input-bindings/#boolean">Boolean</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../input-bindings/#color">Color</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../input-bindings/#point">Point</a>
				</li>
			</ul>
		</li>
		<li class="menuItem">
			<a class="menuItem_anchor" href="../../monitor-bindings/">Monitor bindings</a>
		</li>
		<li class="menuItem">
			<ul class="submenu">
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../monitor-bindings/#multiline">Multiline</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../monitor-bindings/#buffersize">Buffer size</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../monitor-bindings/#interval">Interval</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../monitor-bindings/#graph">Graph</a>
				</li>
			</ul>
		</li>
		<li class="menuItem">
			<a class="menuItem_anchor" href="../../ui-components/">UI components</a>
		</li>
		<li class="menuItem">
			<ul class="submenu">
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../ui-components/#folder">Folder</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../ui-components/#button">Button</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../ui-components/#tab">Tab</a>
				</li>
			</ul>
		</li>
		<li class="menuItem">
			<a class="menuItem_anchor" href="../../blades/">Blades</a>
		</li>
		<li class="menuItem">
			<ul class="submenu">
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../blades/#text">Text</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../blades/#list">List</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../blades/#slider">Slider</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../blades/#separator">Separator</a>
				</li>
			</ul>
		</li>
		<li class="menuItem">
			<a class="menuItem_anchor" href="../../theming/">Theming</a>
		</li>
		<li class="menuItem">
			<ul class="submenu">
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../theming/#builder">Theme builder</a>
				</li>
			</ul>
		</li>
		<li class="menuItem">
			<a class="menuItem_anchor" href="../../plugins/">Plugins</a>
		</li>
		<li class="menuItem">
			<ul class="submenu">
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../plugins/dev/">Plugin development</a>
				</li>
			</ul>
		</li>
		<li class="menuItem">
			<a class="menuItem_anchor" href="../../misc/">Misc</a>
		</li>
		<li class="menuItem">
			<ul class="submenu">
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../misc/#events">Events</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../misc/#state">Import/Export</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../misc/#tips">Tips</a>
				</li>
			</ul>
		</li>
		<li class="menuItem">
			<a class="menuItem_anchor" href="../../migration/">Migration</a>
		</li>
		<li class="menuItem">
			<ul class="submenu">
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../migration/v4/">Version 4.x</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../migration/datgui/">dat.GUI</a>
				</li>
			</ul>
		</li>
		<li class="menuItem">
			<a class="menuItem_anchor" href="../../api/classes/Pane.html" target="_blank">
				API reference
				<span class="material-icons">open_in_new</span>
			</a>
		</li>
		<li class="menuItem">
			<a class="menuItem_anchor" href="https://github.com/cocopon/tweakpane" target="_blank">
				GitHub
				<span class="material-icons">open_in_new</span>
			</a>
		</li>
	</ul>
</div>

			</div>
			<div class="main_main">
				<div class="main_pageHeader">
					
<div class="pageHeader">
	<div class="pageHeader_inner">
		<div class="pageHeader_text">
			<h1 class="pageHeader_title">Version 3.x To 4.x</h1>
			<p>How to migrate outdated functionalities into the v4 structure. See the
				<!-- TODO: Update -->
				<!-- <a href="https://github.com/cocopon/tweakpane/releases/tag/4.0.0" target="_blank">release note</a> -->
				<a href="https://github.com/cocopon/tweakpane/issues/396#issuecomment-1418929095" target="_blank">release note</a>
				for new features.</p>
		</div>
	</div>
</div>

				</div>
				<div class="main_inner">
					
<h2 id="binding"><a href="#binding">ES modules</a></h2>
<p>Tweakpane has been migrated to ES modules from v4.</p>
<div class="main_media">
	<div class="comparison">
		<div class="comparison_codes">
			<div class="comparison_code">
				<div class="codeBlock"><pre><code class="html">&lt;!-- v3 --&gt;
&lt;script src=&quot;./path/to/tweakpane.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
  const pane = new <strong>Tweakpane.</strong>Pane();
  // ...
&lt;/script&gt;</code></pre></div>
			</div>
			<div class="comparison_code">
				<div class="codeBlock"><pre><code class="html">&lt;!-- v4 --&gt;
&lt;script <strong>type=&quot;module&quot;</strong>&gt;
  <strong>import</strong> {Pane} <strong>from</strong> './path/to/tweakpane.js';

  const pane = new Pane();
  // ...
&lt;/script&gt;</code></pre></div>
			</div>
		</div>
	</div>
</div>
<p>If you want to keep existing code, you can export the ES module as a global variable.</p>
<div class="main_media">
	<div class="demo">
		<div class="demo_code">
			<div class="codeBlock"><pre><code class="html">&lt;script type=&quot;module&quot;&gt;
  // Import ES module
  import * as Tweakpane from './path/to/tweakpane.js';

  // Export it as a global variable
  <strong>window.Tweakpane</strong> = Tweakpane;
&lt;/script&gt;
&lt;script&gt;
  const pane = new Tweakpane.Pane();
  // ...
&lt;/script&gt;</code></pre></div>
		</div>
	</div>
</div>


<h2 id="binding"><a href="#binding">Bindings</a></h2>
<p>
	<code>addInput()</code> is now <code>addBinding()</code>. The new name more accurately describes its functionality.
</p>
<div class="main_media">
	<div class="comparison">
		<div class="comparison_codes">
			<div class="comparison_code">
				<div class="codeBlock"><pre><code class="js">// v3
pane.<strong>addInput</strong>(PARAMS, 'size');</code></pre></div>
			</div>
			<div class="comparison_code">
				<div class="codeBlock"><pre><code class="js">// v4
pane.<strong>addBinding</strong>(PARAMS, 'size');</code></pre></div>
			</div>
		</div>
	</div>
</div>

<p><code>addMonitor()</code> is merged into <code>addBinding()</code>, and needs an additional option <code>{readonly: true}</code>.</p>
<div class="main_media">
	<div class="comparison">
		<div class="comparison_codes">
			<div class="comparison_code">
				<div class="codeBlock"><pre><code class="js">// v3
pane.<strong>addMonitor</strong>(PARAMS, 'total');</code></pre></div>
			</div>
			<div class="comparison_code">
				<div class="codeBlock"><pre><code class="js">// v4
pane.<strong>addBinding</strong>(PARAMS, 'total', {
  <strong>readonly</strong>: true,
});</code></pre></div>
			</div>
		</div>
	</div>
</div>


<h2 id="event"><a href="#event">Event handling</a></h2>
<p>If you uses <code>presetKey</code> of the event object, replace it with <code>target.key</code>.</p>
<div class="main_media">
	<div class="comparison">
		<div class="comparison_codes">
			<div class="comparison_code">
				<div class="codeBlock"><pre><code class="js">// v3
const b = pane.addInput(PARAMS, 'strength');

b.on('change', (ev) => {
  console.log(ev.<strong>presetKey</strong>);  // 'strength'
});</code></pre></div>
			</div>
			<div class="comparison_code">
				<div class="codeBlock"><pre><code class="js">// v4
const b = pane.addBinding(PARAMS, 'strength');

b.on('change', (ev) => {
  console.log(ev.<strong>target.key</strong>);  // 'strength'
});</code></pre></div>
			</div>
		</div>
	</div>
</div>

<p>For monitor bindings, use the event name <code>change</code> instead of <code>update</code>.</p>
<div class="main_media">
	<div class="comparison">
		<div class="comparison_codes">
			<div class="comparison_code">
				<div class="codeBlock"><pre><code class="js">// v3
const b = pane.addMonitor(PARAMS, 'total');

b.on('<strong>update</strong>', (ev) => {
  // ...
});</code></pre></div>
			</div>
			<div class="comparison_code">
				<div class="codeBlock"><pre><code class="js">// v4
const b = pane.addBinding(PARAMS, 'total', {readonly: true});

b.on('<strong>change</strong>', (ev) => {
  // ...
});</code></pre></div>
			</div>
		</div>
	</div>
</div>


<h2 id="preset"><a href="#preset">Importing/Exporting a preset</a></h2>
<p>v4 omits the preset functionality <code>importPreset()</code>, <code>exportPreset()</code>, and added <code>importState()</code>, <code>exportState()</code> instead. Exported state has more information about blades.</p>
<div class="main_media">
	<div class="comparison">
		<div class="comparison_codes">
			<div class="comparison_code">
				<div class="codeBlock"><pre><code class="js">// v3
console.log(pane.<strong>exportPreset</strong>());</code></pre></div>
			</div>
			<div class="comparison_code">
				<div class="codeBlock"><pre><code class="js">// v4
console.log(pane.<strong>exportState</strong>());</code></pre></div>
			</div>
		</div>
		<div class="comparison_results">
			<div class="comparison_result">
				<div class="paneContainer" data-pane-preset></div>
				<div class="paneContainer paneContainer-console" data-pane-presetconsole></div>
			</div>
			<div class="comparison_result">
				<div class="paneContainer" data-pane-state></div>
				<div class="paneContainer paneContainer-console" data-pane-stateconsole></div>
			</div>
		</div>
	</div>
</div>

<p>Do you prefer the classic preset style? You can convert a blade state into a preset with a small utility function. Refer <a href="https://github.com/cocopon/tweakpane/blob/a449650916d8c13ba24c822b7954aea73724804a/packages/tweakpane/src/doc/ts/preset.ts" target="_blank">preset.ts</a> to see the whole code written in TypeScript.</p>
<div class="main_media">
	<div class="demo">
		<div class="demo_code">
			<div class="codeBlock"><pre><code class="js">function <strong>stateToPreset</strong>(state) {
  if ('children' in state) {
    return state.children.reduce((tmp, s) =&gt; {
      return {...tmp, ...stateToPreset(s)};
    }, {});
  }
  const binding = state.binding ?? {};
  if ('key' in binding && 'value' in binding) {
    return {[binding.key]: binding.value};
  }
  return {};
}</code></pre></div>
		</div>
		<div class="demo_chip">.js</div>
	</div>
</div>

<p>If you want to handle binding key collisions, generic <code>tag</code> option would be useful to identify each key.</p>
<div class="main_media">
	<div class="demo">
		<div class="demo_code">
			<div class="codeBlock"><pre><code class="js">pane.addBinding(PARAMS, 'speed', {
  <strong>tag</strong>: 'speed2',
});</code></pre></div>
		</div>
		<div class="demo_result">
			<div class="paneContainer" data-pane-tag></div>
			<div class="paneContainer paneContainer-console" data-pane-tagconsole></div>
		</div>
	</div>
</div>


<h2 id="separator"><a href="#separator">Separators</a></h2>
<p><code>addSeparator()</code> is removed in v4. Use <code>addBlade()</code> instead to add a separator.</p>
<div class="main_media">
	<div class="comparison">
		<div class="comparison_codes">
			<div class="comparison_code">
				<div class="codeBlock"><pre><code class="js">// v3
pane.<strong>addSeparator</strong>();</code></pre></div>
			</div>
			<div class="comparison_code">
				<div class="codeBlock"><pre><code class="js">// v4
pane.<strong>addBlade</strong>({<strong>view: 'separator'</strong>});</code></pre></div>
			</div>
		</div>
	</div>
</div>


<h2 id="blade"><a href="#blade">Blade API changes</a></h2>
<p>All blade APIs are renamed.</p>
<div class="main_media">
	<div class="comparison">
		<div class="comparison_codes">
			<div class="comparison_code">
				<div class="codeBlock"><pre><code class="js">// v3
const b = pane.addBlade({
  view: 'slider',
  label: 'brightness',
  min: 0,
  max: 1,
  value: 0.5,
}) as <strong>SliderApi</strong>;</code></pre></div>
			</div>
			<div class="comparison_code">
				<div class="codeBlock"><pre><code class="js">// v4
const b = pane.addBlade({
  view: 'slider',
  label: 'brightness',
  min: 0,
  max: 1,
  value: 0.5,
}) as <strong>SliderBladeApi</strong>;</code></pre></div>
			</div>
		</div>
	</div>
</div>

<p>Here is the list of the renamed blade APIs:</p>

<div class="main_media">
	<table>
		<thead>
			<tr>
				<th>v3</th>
				<th>v4</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td><code>ListApi</code></td>
				<td><code>ListBladeApi</code></td>
			</tr>
			<tr>
				<td><code>SliderApi</code></td>
				<td><code>SliderBladeApi</code></td>
			</tr>
			<tr>
				<td><code>TextApi</code></td>
				<td><code>TextBladeApi</code></td>
			</tr>
		</tbody>
	</table>
</div>

<p>Additionally, <code>minValue</code>, <code>maxValue</code> of the slider blade API is now <code>min</code> and <code>max</code>.</p>
<div class="main_media">
	<div class="comparison">
		<div class="comparison_codes">
			<div class="comparison_code">
				<div class="codeBlock"><pre><code class="js">// v3
const b = pane.addBlade({
  view: 'slider',
  label: 'brightness',
  min: 0,
  max: 1,
  value: 0.5,
}) as SliderApi;

console.log(b.<strong>minValue</strong>, b.<strong>maxValue</strong>);</code></pre></div>
			</div>
			<div class="comparison_code">
				<div class="codeBlock"><pre><code class="js">// v4
const b = pane.addBlade({
  view: 'slider',
  label: 'brightness',
  min: 0,
  max: 1,
  value: 0.5,
}) as SliderBladeApi;

console.log(b.<strong>min</strong>, b.<strong>max</strong>);</code></pre></div>
			</div>
		</div>
	</div>
</div>

				</div>
				<div class="main_globalFooter">
					<div class="globalFooter">
	<div class="globalFooter_inner">
		<div class="globalFooter_copy">
			&copy; 2018 <a href="https://github.com/cocopon">cocopon</a>.
		</div>
	</div>
</div>

				</div>
			</div>
		</div>
	</div>
	<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10/build/highlight.min.js" defer></script>
	<script src="../../assets/tweakpane.js" type="module" defer></script>
	<script type="module">
		window.DocModules = [
			async () => {
				const m = await import('../../assets/tweakpane.js');
				window.Tweakpane = m;
			},
		];
	</script>
	
<script src="https://cdn.jsdelivr.net/npm/dat.gui@0.7.9/build/dat.gui.min.js" defer></script>

	<script type="module">
		// Load Tweakpane module and make it global variable
		await Promise.all(window.DocModules.map((f) => f()));

		// Load document script	
		const scriptElem = document.createElement('script');
		scriptElem.src = '../../assets/bundle.js';
		document.body.appendChild(scriptElem);
	</script>
</body>
</html>
