<!DOCTYPE html>
<html lang="en" class="plugindev">
<head>
	<meta charset="UTF-8">
	
	<title>Plugin development | Tweakpane</title>
	
	<meta name="viewport" content="initial-scale=1,minimum-scale=1,maximum-scale=1">
	<meta name="og:description" content="A compact pane for fine-tuning parameters and monitoring value changes">
	<meta property="og:image" content="https://tweakpane.github.io/docs/assets/og.png">
	<meta name="og:title" content="Tweakpane">
	<meta property="og:type" content="website">
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:description" content="A compact pane for fine-tuning parameters and monitoring value changes">
	<meta name="twitter:image" content="https://tweakpane.github.io/docs/assets/og.png">
	<meta name="twitter:title" content="Tweakpane">
	<link rel="stylesheet" href="../../assets/bundle.css">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
	<div class="main main-plugindev">
		<div class="main_globalHeader">
			<div class="globalHeader">
	<div class="globalHeader_inner">
		<div class="globalHeader_logo">
			<div class="logo">
				<a class="logo_main" href="../../">
					<div class="logo_symbol"></div>
					<div class="logo_text">Tweakpane</div>
				</a>
			</div>
		</div>
		<div class="globalHeader_spMenuButton">
			<button id="spMenuButton" class="spMenuButton">
				<span class="material-icons">menu</span>
			</button>
		</div>
	</div>
</div>

		</div>
		<div class="main_wrap">
			<div class="main_menu">
				<div class="menu">
	<div class="menu_logo">
		<div class="logo">
			<a class="logo_main" href="../../">
				<div class="logo_symbol"></div>
				<div class="logo_text">Tweakpane</div>
			</a>
			<div class="logo_version">
				<div class="logoSwitcher">
					<select class="logoSwitcher_select">
						<option value="">4.0.3</option>
						<option value="../../v3/">3.x</option>
					</select>
					<div class="logoSwitcher_arrow"></div>
				</div>
			</div>
		</div>
	</div>
	<ul class="menu_list">
		<li class="menuItem">
			<a class="menuItem_anchor" href="../../getting-started/">Getting started</a>
		</li>
		<li class="menuItem">
			<a class="menuItem_anchor" href="../../quick-tour/">Quick tour</a>
		</li>
		<li class="menuItem">
			<a class="menuItem_anchor" href="../../input-bindings/">Bindings</a>
		</li>
		<li class="menuItem">
			<ul class="submenu">
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../input-bindings/#number">Number</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../input-bindings/#string">String</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../input-bindings/#boolean">Boolean</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../input-bindings/#color">Color</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../input-bindings/#point">Point</a>
				</li>
			</ul>
		</li>
		<li class="menuItem">
			<a class="menuItem_anchor" href="../../monitor-bindings/">Monitor bindings</a>
		</li>
		<li class="menuItem">
			<ul class="submenu">
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../monitor-bindings/#multiline">Multiline</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../monitor-bindings/#buffersize">Buffer size</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../monitor-bindings/#interval">Interval</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../monitor-bindings/#graph">Graph</a>
				</li>
			</ul>
		</li>
		<li class="menuItem">
			<a class="menuItem_anchor" href="../../ui-components/">UI components</a>
		</li>
		<li class="menuItem">
			<ul class="submenu">
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../ui-components/#folder">Folder</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../ui-components/#button">Button</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../ui-components/#tab">Tab</a>
				</li>
			</ul>
		</li>
		<li class="menuItem">
			<a class="menuItem_anchor" href="../../blades/">Blades</a>
		</li>
		<li class="menuItem">
			<ul class="submenu">
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../blades/#text">Text</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../blades/#list">List</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../blades/#slider">Slider</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../blades/#separator">Separator</a>
				</li>
			</ul>
		</li>
		<li class="menuItem">
			<a class="menuItem_anchor" href="../../theming/">Theming</a>
		</li>
		<li class="menuItem">
			<ul class="submenu">
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../theming/#builder">Theme builder</a>
				</li>
			</ul>
		</li>
		<li class="menuItem">
			<a class="menuItem_anchor" href="../../plugins/">Plugins</a>
		</li>
		<li class="menuItem">
			<ul class="submenu">
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../plugins/dev/">Plugin development</a>
				</li>
			</ul>
		</li>
		<li class="menuItem">
			<a class="menuItem_anchor" href="../../misc/">Misc</a>
		</li>
		<li class="menuItem">
			<ul class="submenu">
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../misc/#events">Events</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../misc/#state">Import/Export</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../misc/#tips">Tips</a>
				</li>
			</ul>
		</li>
		<li class="menuItem">
			<a class="menuItem_anchor" href="../../migration/">Migration</a>
		</li>
		<li class="menuItem">
			<ul class="submenu">
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../migration/v4/">Version 4.x</a>
				</li>
				<li class="submenuItem">
					<a class="submenuItem_anchor" href="../../migration/datgui/">dat.GUI</a>
				</li>
			</ul>
		</li>
		<li class="menuItem">
			<a class="menuItem_anchor" href="../../api/classes/Pane.html" target="_blank">
				API reference
				<span class="material-icons">open_in_new</span>
			</a>
		</li>
		<li class="menuItem">
			<a class="menuItem_anchor" href="https://www.figma.com/community/file/1324202557355874089" target="_blank">
				Design Kit
				<span class="material-icons">open_in_new</span>
			</a>
		</li>
		<li class="menuItem">
			<a class="menuItem_anchor" href="https://github.com/cocopon/tweakpane" target="_blank">
				GitHub
				<span class="material-icons">open_in_new</span>
			</a>
		</li>
	</ul>
</div>

			</div>
			<div class="main_main">
				<div class="main_pageHeader">
					
<div class="pageHeader">
	<div class="pageHeader_inner">
		<div class="pageHeader_text">
			<h1 class="pageHeader_title">Plugin development</h1>
			<p>Create your own plugins and share them with the world.</p>
		</div>
	</div>
</div>

				</div>
				<div class="main_inner">
					
<h2 id="whatisplugin"><a href="#whatisplugin">What is the plugin?</a></h2>
<p>
	Tweakpane can be extended with the plugin system. For example, <a href="https://github.com/tweakpane/plugin-essentials" target="_blank">Essentials plugin</a> adds support for various useful components to the pane.
</p>

<div class="main_media">
	<div class="demo">
		<div class="demo_code">
			<div class="codeBlock">
				<pre><code class="js">import {Pane} from 'tweakpane';
import * as EssentialsPlugin from '@tweakpane/plugin-essentials';

const pane = new Pane();

// Register plugin to the pane
pane.registerPlugin(EssentialsPlugin);

// Add a FPS graph
const fpsGraph = pane.addBlade({
  view: 'fpsgraph',
  label: 'fps',
});

// ...</code></pre>
			</div>
		</div>
		<div class="demo_result">
			<div class="paneContainer" data-pane-essentials></div>
		</div>
	</div>
</div>


<h2 id="howitworks"><a href="#howitworks">How it works</a></h2>
<p>Let's learn about the basics of the plugin by looking at a practical example. The goal of this section is creating a plugin that provides a custom binding control for the option <code>view: 'counter'</code>. This control can simply increment the bound value.</p>

<div class="main_media">
	<div class="demo">
		<div class="demo_code">
			<div class="codeBlock">
				<pre><code class="js">import {Pane} from 'tweakpane';

const PARAMS = {count: 0};

const pane = new Pane();
pane.registerPlugin(CounterInputPlugin);

// Add a custom binding control
// for `view: 'counter'`
pane.addBinding(PARAMS, 'count', {
  view: 'counter',
});</code></pre>
			</div>
		</div>
		<div class="demo_result">
			<div class="paneContainer" data-pane-counter></div>
		</div>
	</div>
</div>


<h3>Plugin pool</h3>
<p>All views of the pane will be created using the plugin. The pane has a plugin pool which comes with pre-installed plugins by default.</p>

<div class="main_media">
	<div class="demo">
		<div class="demo_code">
			<div class="codeBlock codeBlock-fig">
				<pre><code class="text">  Plugin pool

+------------------------------------+
|                                    |
| plugins[0]: Point2dInputPlugin     |
| plugins[1]: Point3dInputPlugin     |
| plugins[2]: Point4dInputPlugin     |
| plugins[3]: StringInputPlugin      |
| plugins[4]: NumberInputPlugin      |
| plugins[5]: StringColorInputPlugin |
| plugins[6]: ObjectColorInputPlugin |
| plugins[7]: NumberColorInputPlugin |
| plugins[8]: BooleanInputPlugin     |
| ...                                |
|                                    |
+------------------------------------+</code></pre>
			</div>
		</div>
	</div>
</div>

<p><code>registerPlugin()</code> can add specified plugins to the pool.</p>

<div class="main_media">
	<div class="demo">
		<div class="demo_code">
			<div class="codeBlock">
				<pre><code class="ts">const CounterPluginBundle: <a href="../../api/types/TpPluginBundle.html">TpPluginBundle</a> = {
  // Identifier of the plugin bundle
  id: 'counter',
  // Plugins that should be registered
  plugins: [
    <strong>CounterInputPlugin</strong>,
  ],
  // Additional CSS for this bundle
  css: `
    .tp-counter {align-items: center; display: flex;}
    .tp-counter div {color: #00ffd680; flex: 1;}
    .tp-counter button {background-color: #00ffd6c0; border-radius: 2px; color: black; height: 20px; width: 20px;}
  `,
};
pane.<strong>registerPlugin</strong>(CounterPluginBundle);</code></pre>
			</div>
		</div>
	</div>
</div>

<div class="main_media">
	<div class="demo">
		<div class="demo_code">
			<div class="codeBlock codeBlock-fig">
				<pre><code class="text">  Plugin pool

+------------------------------------+
|                                    |
| plugins[0]: <strong>CounterInputPlugin</strong> ... &lt;-- Added
|                                    |
| plugins[1]: Point2dInputPlugin     |
| plugins[2]: Point3dInputPlugin     |
| plugins[3]: Point4dInputPlugin     |
| plugins[4]: StringInputPlugin      |
| plugins[5]: NumberInputPlugin      |
| plugins[6]: StringColorInputPlugin |
| plugins[7]: ObjectColorInputPlugin |
| plugins[8]: NumberColorInputPlugin |
| plugins[9]: BooleanInputPlugin     |
| ...                                |
|                                    |
+------------------------------------+</code></pre>
			</div>
		</div>
	</div>
</div>


<h3>Plugin structure</h3>
<p>Tweakpane plugin should be an object of the type <a href="../../api/types/TpPlugin.html"><code>TpPlugin</code></a>.</p>

<div class="main_media">
	<div class="demo">
		<div class="demo_code">
			<div class="codeBlock">
				<pre><code class="ts">const CounterInputPlugin: <a href="../../api/types/TpPlugin.html">TpPlugin</a> = createPlugin({
  id: 'counter',
  <a href="#type">type</a>: 'input',
  <a href="#accept">accept</a>: () => {...},
  <a href="#binding">binding</a>: {
    reader: () => {...},
    writer: () => {...},
  },
  <a href="#controller">controller</a>: () => {...},
});</code></pre>
			</div>
		</div>
	</div>
</div>

<p>
	When user calls <code>addBinding()</code>, the pane passes the value and the options to each plugin to see if it can handle this binding by its <code>accept()</code>.
</p>

<div class="main_media">
	<div class="demo">
		<div class="demo_code">
			<div class="codeBlock codeBlock-fig">
				<pre><code class="text">              +--------------------------------------------------------------------------------+
              | Pane                                                                           |
              |                                                        Plugin pool             |
              |                                                                                |
              |                                                      +------------------+      |
              |                                                      | plugins[0]       |      |
+------+      |                       Can you handle this binding?   |                  |      |
| User | *--&gt; | addBinding() *------+------------------------------&gt; | accept() ....... &lt; NO.. |
+------+      |                     |                                |                  |      |
              |                     |                                +------------------+      |
              |                     |                                                          |
              |                     |                                +------------------+      |
              |                     |                                | plugins[1]       |      |
              |                     | How about you?                 |                  |      |
              |                     +------------------------------&gt; | accept() ....... &lt; NO.. |
              |                     |                                |                  |      |
              |                     |                                +------------------+      |
              |                     |                                                          |
              |                     |                                +------------------+      |
              |                     |                                | plugins[2]       |      |
              |                     | How about you?                 |                  |      |
              |                     +------------------------------&gt; | accept() ....... &lt; YES! |
              |                                                      |                  |      |
              |                         Please create a binding      |                  |      |
              |                         for the specified value      |                  |      |
              |                       *----------------------------&gt; | binding.reader() |      |
              |                                                      |        .writer() |      |
              |                         Please create a controller   |                  |      |
              |                         (and a view)                 |                  |      |
              |                         for the bound value          |                  |      |
              |                       *----------------------------&gt; | controller()     |      |
              |                                                      |                  |      |
              |                                                      +------------------+      |
              |                                                                                |
              +--------------------------------------------------------------------------------+</code></pre>
			</div>
		</div>
	</div>
</div>


<h3 id="type"><a href="#type"><code>type</code></a></h3>
<p>
	There are 3 types of plugins for Tweakpane: <code>input</code>, <code>monitor</code>, and <code>blade</code>.
</p>

<div class="main_media">
	<table>
		<tbody>
			<tr>
				<th>Type</th>
				<th>Description</th>
				<th>Target</th>
			</tr>
			<tr>
				<td><code>input</code></td>
				<td>Provides a view for <a href="../../input-bindings/">binding</a></td>
				<td><code>addBinding()</code></td>
			</tr>
			<tr>
				<td><code>monitor</code></td>
				<td>Provides a view for <a href="../../monitor-bindings/">readonly binding</a></td>
				<td><code>addBinding()</code> with <code>{readonly: true}</code></td>
			</tr>
			<tr>
				<td><code>blade</code></td>
				<td>Provides a <a href="../../blades/">view without binding</a></td>
				<td><code>addBlade()</code></td>
			</tr>
		</tbody>
	</table>
</div>

<p>From here on, we will choose <code>input</code> to provide a custom view for the binding.</p>

<div class="main_media">
	<div class="demo">
		<div class="demo_code">
			<div class="codeBlock">
				<pre><code class="ts">const CounterInputPlugin = {
  // ...

  <strong>type</strong>: 'input',

  // ...
};</code></pre>
			</div>
		</div>
	</div>
</div>


<h3 id="accept"><a href="#accept"><code>accept()</code></a></h3>
<p>Decides whether the plugin accepts the specified parameters. Returns a typed value and parameters if the plugin accepts the specified parameters, or <code>null</code> if the plugin sees them off and pass them to the next plugin. (<a href="../../api/interfaces/_internal_.InputBindingPlugin.html#accept">Reference</a>)</p>

<div class="main_media">
	<div class="demo">
		<div class="demo_code">
			<div class="codeBlock">
				<pre><code class="ts">const CounterInputPlugin = {
  // ...

  <strong>accept</strong>(value: unknown, params: Record&lt;string, unknown&gt;) {
    if (typeof value !== 'number') {
      return null;
    }
    if (params.view !== 'counter') {
      return null;
    }
    return {
      initialValue: value,
      params: params,
    };
  },

  // ...
};</code></pre>
			</div>
		</div>
	</div>
</div>


<h3 id="binding"><a href="#binding"><code>binding</code></a></h3>
<p>Configurations of the binding. Tweakpane can convert the external (= input) value into an internal value for certain reasons. For example, string color value <code>'#112233'</code> is inconvenient when modifying color components in various color spaces. Tweakpane converts it into the internal color class using this configuration.</p>
<p>If you want to handle a primitive value (<code>number</code>, <code>string</code>, or <code>boolean</code>), you don't have to convert a value here. (<a href="../../api/interfaces/_internal_.InputBindingPlugin.html#binding">Reference</a>)</p>

<div class="main_media">
	<div class="demo">
		<div class="demo_code">
			<div class="codeBlock">
				<pre><code class="ts">const CounterInputPlugin = {
  // ...

  <strong>binding</strong>: {
    reader: () => (value: unknown) => Number(value),
    writer: () => (target: BindingTarget, value: number) => {
      target.write(value);
    },
  },

  // ...
};</code></pre>
			</div>
		</div>
	</div>
</div>


<h3 id="controller"><a href="#controller"><code>controller()</code></a></h3>
<p>Create a controller and a view for the binding.</p>

<div class="main_media">
	<div class="demo">
		<div class="demo_code">
			<div class="codeBlock">
				<pre><code class="ts">const CounterInputPlugin = {
  // ...

  <strong>controller</strong>(args) {
    return new CounterController(args.document, {
      value: args.value,
      viewProps: args.viewProps,
    });
  },

  // ...
};</code></pre>
			</div>
		</div>
	</div>
</div>

<p>Tweakpane adopts good old MVC structure. <code>Controller</code> creates a view, handle user interaction, and update models (in this case, the bound value).</p>

<div class="main_media">
	<div class="demo">
		<div class="demo_code">
			<div class="codeBlock codeBlock-compact">
				<pre><code class="ts">import {Value, ValueController, ViewProps} from '@tweakpane/core';
import {CounterView} from './view';

interface Config {
  value: Value&lt;number&gt;;
  viewProps: ViewProps;
}

export class <strong>CounterController</strong> implements ValueController&lt;number, CounterView&gt; {
  public readonly value: Value&lt;number&gt;;
  public readonly view: CounterView;
  public readonly viewProps: ViewProps;

  constructor(doc: Document, config: Config) {
    // Models
    this.value = config.value;
    this.viewProps = config.viewProps;

    // Create a view
    this.view = new CounterView(doc, {
      value: config.value,
      viewProps: this.viewProps,
    });

    // Handle user interaction
    this.view.buttonElement.addEventListener('click', () => {
      // Update a model
      this.value.rawValue += 1;
    });
  }
}</code></pre>
			</div>
		</div>
	</div>
</div>

<p><code>View</code> creates DOM elements and apply value changes to them.</p>

<div class="main_media">
	<div class="demo">
		<div class="demo_code">
			<div class="codeBlock codeBlock-compact">
				<pre><code class="ts">import {Value, View, ViewProps} from '@tweakpane/core';

interface Config {
  value: Value&lt;number&gt;;
  viewProps: ViewProps;
}

export class <strong>CounterView</strong> implements View {
  public readonly element: HTMLElement;
  public readonly buttonElement: HTMLButtonElement;

  constructor(doc: Document, config: Config) {
    // Create view elements
    this.element = doc.createElement('div');
    this.element.classList.add('tp-counter');

    // Apply value changes to the preview element
    const previewElem = doc.createElement('div');
    const value = config.value;
    value.emitter.on('change', () => {
      previewElem.textContent = String(value.rawValue);
    });
    previewElem.textContent = String(value.rawValue);
    this.element.appendChild(previewElem);

    // Create a button element for user interaction
    const buttonElem = doc.createElement('button');
    buttonElem.textContent = '+';
    this.element.appendChild(buttonElem);
    this.buttonElement = buttonElem;
  }
}</code></pre>
			</div>
		</div>
	</div>
</div>


<h3>Priority of the plugin</h3>
<p>Newer plugins have higher priority and manually registered plugins have higher priority than pre-installed plugins.</p>

<div class="main_media">
	<div class="demo">
		<div class="demo_code">
			<div class="codeBlock codeBlock-fig">
				<pre><code class="text">  Plugin pool
+------------------------------------+
|                                    |
| plugins[0]: CounterInputPlugin     |  ^  Newer, higher priority
|                                    |  |
| plugins[1]: Point2dInputPlugin     |  |
| plugins[2]: Point3dInputPlugin     |  |
| plugins[3]: Point4dInputPlugin     |  |
| plugins[4]: StringInputPlugin      |  |
| plugins[5]: NumberInputPlugin      |  |
| plugins[6]: StringColorInputPlugin |  |
| plugins[7]: ObjectColorInputPlugin |  |
| plugins[8]: NumberColorInputPlugin |  |
| plugins[9]: BooleanInputPlugin     |  |
| ...                                |  *  Older, lower priority
|                                    |
+------------------------------------+</code></pre>
			</div>
		</div>
	</div>
</div>

<p>It implies that you should be cautious not to accept an excessibely wide range of parameters. <code>view</code> option can be useful for this purpose. </p>


<h2>Next step</h2>
<p>That concludes the basics of the plugin structure. There are many other practices and useful methods for the plugin development. See <a href="https://github.com/tweakpane/plugin-template" target="_blank">@tweakpane/plugin-template</a> for the first step of your development. Additionally, <a href="https://github.com/tweakpane/plugin-essentials" target="_blank">@tweakpane/plugin-essentials</a> can also serve as a practical example.</p>

				</div>
				<div class="main_globalFooter">
					<div class="globalFooter">
	<div class="globalFooter_inner">
		<div class="globalFooter_copy">
			&copy; 2018 <a href="https://github.com/cocopon">cocopon</a>.
		</div>
	</div>
</div>

				</div>
			</div>
		</div>
	</div>
	<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10/build/highlight.min.js" defer></script>
	<script src="../../assets/tweakpane.js" type="module" defer></script>
	<script type="module">
		window.DocModules = [
			async () => {
				const m = await import('../../assets/tweakpane.js');
				window.Tweakpane = m;
			},
		];
	</script>
	
<script type="module">
	window.DocModules.push(
		async () => {
			const m = await import('https://esm.run/@tweakpane/plugin-essentials@0.2.0-beta.0');
			window.TweakpaneEssentialsPlugin = m;
		},
	);
</script>

	<script type="module">
		// Load Tweakpane module and make it global variable
		await Promise.all(window.DocModules.map((f) => f()));

		// Load document script	
		const scriptElem = document.createElement('script');
		scriptElem.src = '../../assets/bundle.js';
		document.body.appendChild(scriptElem);
	</script>
</body>
</html>
